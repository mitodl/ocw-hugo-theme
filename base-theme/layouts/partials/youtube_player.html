{{ $random := delimit (shuffle (split (md5 "seed") "" )) "" }}
{{$youtubeParams:=""}}
{{if and (ne .startTime "") (ne .endTime "")}}
{{$youtubeParams =  delimit (slice `, "youtube": { "start": ` .startTime `, "end":`  .endTime  `}`) "" }}
{{else if ne .startTime ""}}
{{$youtubeParams =  delimit (slice `, "youtube": { "start": ` .startTime `}`) "" }}
{{else if ne .endTime ""}}
{{$youtubeParams =  delimit (slice `, "youtube": { "end": ` .endTime `}`) "" }}
{{end}}

<div class="video-container">
  <video
    id="video-player-{{ .youtubeKey }}-{{ $random }}"
    class="video-js vjs-default-skin vjs-big-play-centered vjs-ocw"
    controls
    data-setup='{
    "fluid": true,
    "techOrder": ["youtube"],
    "sources": [{"type": "video/youtube", "src": "https://www.youtube.com/embed/{{ .youtubeKey }}"}]
    {{$youtubeParams}} }'
  >
      {{ if .captionsLocation }}
        <track kind="captions" src="{{ .captionsLocation }}" srclang="en" label="English" default>
      {{ end }}
  </video>
  {{ if .captionsLocation }}
        <track kind="captions" src="{{ .captionsLocation }}" srclang="en" label="English" default>
  {{ end }}
</div>
