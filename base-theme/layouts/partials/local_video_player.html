{{ $random := delimit (shuffle (split (md5 "seed") "" )) "" }}
{{ $playerId := printf "video-player-%s-%s" .youtubeKey $random }}
<div class="video-container embedded-video-container">
  <video
    id="{{ $playerId }}"
    class="video-js vjs-default-skin vjs-big-play-centered vjs-16-9"
    controls
    data-setup='{
    "fluid": true,
    "inactivityTimeout": 0}'
  >
      {{ if .archiveUrl }}
        <source src="{{ partial "resource_url.html" (dict "context" .context "url" .archiveUrl) }}" type="video/mp4" />
      {{ end }}
  </video>
</div>

{{ if and .startTime .endTime }}
<script>
  window.onload = function() {
    if (window.videojs) {
      let player = window.videojs("{{ $playerId }}")
      let startTime = {{ .startTime }}
      let endTime = {{ .endTime }}
      player.currentTime(startTime)
      player.on("timeupdate", function(e) {
        if(player.currentTime() >= endTime) {
          player.pause()
        }
      })
    }
  }
</script>
{{ end }}