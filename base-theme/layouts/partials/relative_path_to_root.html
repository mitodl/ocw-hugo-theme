{{/* 
  Takes a given absolute URL and returns a relative URL,
  relative to the home page of the currently rendering site
*/}}
{{- $parsedUrl := urls.Parse . -}}
{{- $slashCount := strings.Count "/" $parsedUrl.Path -}}
{{- $pathToRoot := "" -}}
{{- if gt $slashCount 1 -}}
  {{- $steps := sub $slashCount 1 -}}
  {{- range seq $steps -}}
    {{- $pathToRoot = $pathToRoot | print "../" -}}
  {{- end -}}
{{- end -}}
{{- if eq $pathToRoot "" -}}
  {{- $pathToRoot = "./" -}}
{{- end -}}
{{ return $pathToRoot }}
