{{ define "main" }}
{{ partial "course_content.html" . }}

{{- $numberOfResourcesLimit := 10 -}}
{{ $taxonomy := "learning_resource_types" }}

<div class="mb-5">
  {{ with ($.Site.GetPage (printf "/%s" $taxonomy)) }}
    {{ with .Pages }}
      {{ range . }}
        <div>
          <h4 class="my-4">{{ .Title }}</h4>  
        </div>

        {{ $numberOfResources := (len .Pages) }}
        {{ $limitedResourcesShown := false }}

        {{ if gt $numberOfResources $numberOfResourcesLimit }}
          {{ $numberOfResources = $numberOfResourcesLimit }}
          {{ $limitedResourcesShown = true }}
        {{ end }}

        {{ range sort (first $numberOfResources .Pages) .Params "title" }}
          {{- partial "resource_list_item.html" (dict "params" .Params "permalink" .Permalink) -}}
          <hr>
        {{ end }}
        {{ if eq $limitedResourcesShown true }}
          <div>
            <div class="float-right">
              {{- partial "see_all.html" (dict "permalink" .Permalink) -}}
            </div>
          </div>
        {{ end }}
        <br>
      {{ end }}
    {{ else }}
      <div>
        <p>No Resources Found.</p>  
      </div>
    {{ end }}
  {{ end }}
</div>

{{ end }}
