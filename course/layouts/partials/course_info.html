{{ $courseData := .context.Site.Data.course }}
{{ $inPanel := .inPanel }}
<div class="table-responsive course-info">
  <div class="course-info-expander">
    <h4 class="course-info-title font-weight-bold">Course Info</h4>
  </div>
  <div id="course-info" class="position-relative {{ if not $inPanel }}collapse{{ end }}" aria-expanded="false">
    <table id="course-info-table" class="table table-borderless" >
      {{ with $courseData.instructors.content }}
      <tr>
        {{ $instructors := partial "get_instructors.html" . }}
        <td class="pl-0">{{ if eq (len $instructors) 1 }}Instructor{{ else }}Instructors{{ end }}:</td>
        <td>
          {{ partial "partial_collapse_list.html" (dict "list" $instructors "id" "instructors" "key" "title" "klass" "course-info-instructor" "showCollapse" $inPanel) }}
        </td>
      </tr>
      {{ end }}
      <tr>
        <td class="pl-0">Course Number:</td>
        <td>{{ partial "partial_collapse_list.html" (dict "list" ((slice $courseData.primary_course_number) | append (split $courseData.extra_course_numbers ",")) "id" "course_numbers" "useLinks" false) }}</td>
      </tr>
      {{ with $courseData.department_numbers }}
      <tr>
        <td class="pl-0">Departments:</td>
        <td>
          {{ $departments := partial "get_departments.html" . }}
          {{ partial "partial_collapse_list.html" (dict "list" $departments "id" "departments" "key" "title" "klass" "course-info-department" "useLinks" true) }}
        </td>
      </tr>
      {{ end }}
      {{ if not $inPanel }}
      <tr>
        <td class="pl-0">Topics:</td>
        <td>
          {{ partial "topics_oneline.html" . }}
        </td>
      </tr>
      {{ end }}
      <tr>
        <td class="pl-0 text-nowrap">As Taught In:</td>
        <td>
          {{ $courseData.term }} {{ if isset $courseData "year" }}{{ $courseData.year }}{{ end }}
        </td>
      </tr>
      <tr>
        <td class="pl-0">Level:</td>
        <td>
          {{ if eq (printf "%T" $courseData.level) "string" }}
            {{ $levelSearchUrl := partial "get_search_url.html" (dict "key" "level" "value" $courseData.level) }}
            <a href="{{ $levelSearchUrl }}" class="course-info-level">
              {{ $courseData.level }}
            </a>
          {{ else }}
            {{ range $courseData.level }}
              {{ $levelSearchUrl := partial "get_search_url.html" (dict "key" "level" "value" .) }}
              <a href="{{ $levelSearchUrl }}" class="course-info-level">
                {{ . }}
              </a><br />
            {{ end }}
          {{ end }}
        </td>
      </tr>
    </table>
  </div>
</div>
<div>
  <hr class="mb-0">
  {{ if not $inPanel }}
  <div class="collapse-btn-section float-right mb-3">
    <a role="button" class="collapsed" data-toggle="collapse" href="#course-info" aria-expanded="false" aria-controls="course-info">
      <span class="material-icons"></span>
    </a>
  </div>
  {{ end }}
</div>
