{{ define "main" }}
{{- $pages := .Site.RegularPages -}}
{{- $stories := where $pages "Type" "==" "stories" -}}
<div class="list-container">
  {{ block "header" . }}
  {{ partialCached "header" . }}
  {{end}}
  <div class="testimonial-banner list d-flex flex-column">
    <div class="standard-width container text-center">
    <h1>OpenCourseWare Stories</h1>
    <p>MIT students' stories reflect a relentless pursuit of knowledge and innovation. From coding breakthroughs to launching startups, their journey showcases the Institute's commitment to pushing boundaries and changing the world.</p>
    </div>
  </div>
  <div class="standard-width container">
    <div class="d-flex flex-wrap stories-list-item-container">
      {{ range $index, $testimonial := $stories }}
        {{ if or (eq (mod $index 8) 0) (eq (mod $index 8) 1) }}
          <div class="d-flex flex-nowrap justify-content-center col-12 col-md-6 col-lg-6 p-0 stories-list-item">
        {{ else }}  
          <div class="d-flex flex-nowrap justify-content-center col-12 col-md-6 col-lg-4 p-0 stories-list-item">
        {{ end }}
            <a 
              data-modal-content-id="modal-content-{{ $index }}" 
              class="item-wrapper d-block testimonial-link {{if $testimonial.Params.is_quote}}js-modal-trigger{{end}} text-decoration-none" 
              {{ if $testimonial.Params.is_quote }} 
                onclick="updateContent(this); return false;" 
                href="#" 
                data-toggle="modal" 
                data-target="#exampleModalCenter"
              {{ else }} 
                href="{{ $testimonial.RelPermalink }}" 
              {{ end }}
            >
              {{ partial "stories_card.html" (dict "testimonial" $testimonial "index" $index "source" "list") }}
            </a>
            {{ if $testimonial.Params.is_quote }}
              <div id="modal-content-{{ $index }}" class="hidden-modal-content">
                {{ partial "stories_card.html" (dict "testimonial" $testimonial "context" "modal" "source" "list") }}
              </div>
            {{ end }}
          </div>
      {{ end }}
    </div>
  </div>
</div>
{{ partial "home_stories_banner.html" (dict "source" "list")}}
{{ block "footer" . }} {{ partialCached "footer" . }} {{end}}
{{ partial "quotes_modal.html" }}
{{ end }}
